import{s as O,a as w,e as q,t as W,E as z,f as M,g as I,c as R,b as j,d as B,A as C,m as k,y as D,i as N,h as v,j as F,k as y,p as H,q as K}from"../chunks/scheduler.DCHIdItQ.js";import{S as Q,i as T,c as $,a as G,m as J,t as E,b as P,d as X,e as L,g as Y}from"../chunks/index.BPubO7i7.js";import{p as Z}from"../chunks/stores.DUnNtWjl.js";import{l as U,s as x}from"../chunks/stores.CDP2pJ8Z.js";import{M as ee,a as se}from"../chunks/MsgsContainer.Da7Ff4TX.js";function V(r){let l,s;return l=new se({props:{messages:r[1],currentRoomMembers:[r[4].data.USER,r[0]]}}),{c(){$(l.$$.fragment)},l(e){G(l.$$.fragment,e)},m(e,n){J(l,e,n),s=!0},p(e,n){const o={};n&2&&(o.messages=e[1]),n&17&&(o.currentRoomMembers=[e[4].data.USER,e[0]]),l.$set(o)},i(e){s||(E(l.$$.fragment,e),s=!0)},o(e){P(l.$$.fragment,e),s=!1},d(e){L(l,e)}}}function te(r){let l,s,e,n,o,g,b,p,u=r[0].username+"",i,m,_,d,h;document.title=l=r[0].username;let t=r[1].length>0&&V(r);return d=new ee({props:{id:r[5],socket:r[2]}}),{c(){s=w(),e=q("div"),n=q("div"),o=q("img"),b=w(),p=q("span"),i=W(u),m=w(),t&&t.c(),_=w(),$(d.$$.fragment),this.h()},l(a){z("svelte-qejvw",document.head).forEach(M),s=I(a),e=R(a,"DIV",{class:!0});var f=j(e);n=R(f,"DIV",{class:!0});var S=j(n);o=R(S,"IMG",{src:!0,alt:!0,class:!0}),b=I(S),p=R(S,"SPAN",{class:!0});var A=j(p);i=B(A,u),A.forEach(M),S.forEach(M),m=I(f),t&&t.l(f),_=I(f),G(d.$$.fragment,f),f.forEach(M),this.h()},h(){C(o.src,g=r[0].profilepicture)||k(o,"src",g),k(o,"alt","pfp"),k(o,"class","room-picture svelte-11yuiso"),k(p,"class","svelte-11yuiso"),k(n,"class","room-title svelte-11yuiso"),k(e,"class","container svelte-11yuiso"),D(e,"dark",!!r[3])},m(a,c){N(a,s,c),N(a,e,c),v(e,n),v(n,o),v(n,b),v(n,p),v(p,i),v(e,m),t&&t.m(e,null),v(e,_),J(d,e,null),h=!0},p(a,[c]){(!h||c&1)&&l!==(l=a[0].username)&&(document.title=l),(!h||c&1&&!C(o.src,g=a[0].profilepicture))&&k(o,"src",g),(!h||c&1)&&u!==(u=a[0].username+"")&&F(i,u),a[1].length>0?t?(t.p(a,c),c&2&&E(t,1)):(t=V(a),t.c(),E(t,1),t.m(e,_)):t&&(Y(),P(t,1,1,()=>{t=null}),X());const f={};c&4&&(f.socket=a[2]),d.$set(f),(!h||c&8)&&D(e,"dark",!!a[3])},i(a){h||(E(t),E(d.$$.fragment,a),h=!0)},o(a){P(t),P(d.$$.fragment,a),h=!1},d(a){a&&(M(s),M(e)),t&&t.d(),L(d)}}}function ae(r,l,s){let e,n,o,g;y(r,U,m=>s(7,n=m)),y(r,Z,m=>s(4,o=m)),y(r,x,m=>s(6,g=m));const b=o.params.id;let p={},u=[],i;return H(()=>{s(2,i=new WebSocket(`ws://localhost:7000/api/socket/${b}`)),s(2,i.onopen=()=>{s(2,i.onmessage=({data:m})=>{let _=JSON.parse(m);_.shortened=_.text.length>1400,s(1,u=[...u,_])},i)},i),s(1,u=o.data.messages),s(0,p=o.data.peer),K(U,n.goPast=!0,n)}),r.$$.update=()=>{r.$$.dirty&64&&s(3,e=!g.LightMode)},[p,u,i,e,o,b,g]}class me extends Q{constructor(l){super(),T(this,l,ae,te,O,{})}}export{me as component};
