import{s as W,a as S,e as w,t as z,E as B,f as E,g as I,c as R,b as q,d as F,A,m as M,y as C,i as D,h as b,j as H,k as y,p as K,q as Q}from"../chunks/scheduler.DCHIdItQ.js";import{S as T,i as U,c as N,a as V,m as j,t as G,b as J,e as L}from"../chunks/index.BPubO7i7.js";import{p as X}from"../chunks/stores.DUnNtWjl.js";import{l as O,s as Y}from"../chunks/stores.CDP2pJ8Z.js";import{a as Z,M as $}from"../chunks/MsgsContainer.Da7Ff4TX.js";function x(o){let d,s,t,n,r,p,k,i,g=o[0].title+"",u,l,a,h,f,_;return document.title=d=o[0].title,a=new Z({props:{messages:o[2],currentRoomMembers:o[1]}}),f=new $({props:{id:o[5],socket:o[3]}}),{c(){s=S(),t=w("div"),n=w("div"),r=w("img"),k=S(),i=w("span"),u=z(g),l=S(),N(a.$$.fragment),h=S(),N(f.$$.fragment),this.h()},l(e){B("svelte-16lvtr4",document.head).forEach(E),s=I(e),t=R(e,"DIV",{class:!0});var c=q(t);n=R(c,"DIV",{class:!0});var v=q(n);r=R(v,"IMG",{src:!0,alt:!0,class:!0}),k=I(v),i=R(v,"SPAN",{class:!0});var P=q(i);u=F(P,g),P.forEach(E),v.forEach(E),l=I(c),V(a.$$.fragment,c),h=I(c),V(f.$$.fragment,c),c.forEach(E),this.h()},h(){A(r.src,p=o[0].profilepicture)||M(r,"src",p),M(r,"alt","pfp"),M(r,"class","room-picture svelte-11yuiso"),M(i,"class","svelte-11yuiso"),M(n,"class","room-title svelte-11yuiso"),M(t,"class","container svelte-11yuiso"),C(t,"dark",!!o[4])},m(e,m){D(e,s,m),D(e,t,m),b(t,n),b(n,r),b(n,k),b(n,i),b(i,u),b(t,l),j(a,t,null),b(t,h),j(f,t,null),_=!0},p(e,[m]){(!_||m&1)&&d!==(d=e[0].title)&&(document.title=d),(!_||m&1&&!A(r.src,p=e[0].profilepicture))&&M(r,"src",p),(!_||m&1)&&g!==(g=e[0].title+"")&&H(u,g);const c={};m&4&&(c.messages=e[2]),m&2&&(c.currentRoomMembers=e[1]),a.$set(c);const v={};m&8&&(v.socket=e[3]),f.$set(v),(!_||m&16)&&C(t,"dark",!!e[4])},i(e){_||(G(a.$$.fragment,e),G(f.$$.fragment,e),_=!0)},o(e){J(a.$$.fragment,e),J(f.$$.fragment,e),_=!1},d(e){e&&(E(s),E(t)),L(a),L(f)}}}function ee(o,d,s){let t,n,r,p;y(o,O,a=>s(7,n=a)),y(o,X,a=>s(8,r=a)),y(o,Y,a=>s(6,p=a));const k=r.params.id;let i={},g=[],u=[],l;return K(()=>{s(3,l=new WebSocket(`ws://localhost:7000/api/socket/${k}`)),s(3,l.onopen=()=>{s(3,l.onmessage=({data:a})=>{let h=JSON.parse(a);h.shortened=h.text.length>1400,s(2,u=[...u,h])},l)},l),s(2,u=r.data.messages),s(1,g=r.data.members),s(0,i=r.data.room),Q(O,n.goPast=!0,n)}),o.$$.update=()=>{o.$$.dirty&64&&s(4,t=!p.LightMode)},[i,g,u,l,t,k,p]}class ne extends T{constructor(d){super(),U(this,d,ee,x,W,{})}}export{ne as component};
