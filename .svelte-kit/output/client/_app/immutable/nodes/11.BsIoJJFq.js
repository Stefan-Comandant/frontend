import{s as H,e as y,a as T,t as J,c as b,b as L,f as v,g as q,d as K,m,z as Y,y as E,i as j,h,u as I,o as U,D as se,j as re,r as ae,k as V,O as ne,p as Q,q as W,n as G}from"../chunks/scheduler.DCHIdItQ.js";import{S as X,i as Z,g as oe,b as S,d as le,t as M,c as $,a as x,m as ee,e as te}from"../chunks/index.BPubO7i7.js";import{g as ie}from"../chunks/entry.D7BuMwTx.js";import{a as ue}from"../chunks/authentication.DJ3ISZ87.js";import{l as N,s as ce}from"../chunks/stores.CDP2pJ8Z.js";import{L as pe}from"../chunks/LoadingCircle.DD_T3a5K.js";function fe(a){let e;return{c(){e=J("Submit")},l(t){e=K(t,"Submit")},m(t,s){j(t,e,s)},i:G,o:G,d(t){t&&v(e)}}}function me(a){let e,t;return e=new pe({}),{c(){$(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,r){ee(e,s,r),t=!0},i(s){t||(M(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){te(e,s)}}}function de(a){let e,t,s,r,i,n,_,c,u,f,P,d,p=a[0].response+"",D,g,O,z;const C=[me,fe],w=[];function F(o,l){return o[1]?0:1}return u=F(a),f=w[u]=C[u](a),{c(){e=y("form"),t=y("div"),s=y("input"),r=T(),i=y("div"),n=y("input"),_=T(),c=y("button"),f.c(),P=T(),d=y("span"),D=J(p),this.h()},l(o){e=b(o,"FORM",{class:!0});var l=L(e);t=b(l,"DIV",{class:!0});var k=L(t);s=b(k,"INPUT",{type:!0,placeholder:!0,class:!0}),k.forEach(v),r=q(l),i=b(l,"DIV",{class:!0});var A=L(i);n=b(A,"INPUT",{type:!0,placeholder:!0,class:!0}),A.forEach(v),_=q(l),c=b(l,"BUTTON",{type:!0,style:!0,class:!0});var B=L(c);f.l(B),B.forEach(v),P=q(l),d=b(l,"SPAN",{class:!0});var R=L(d);D=K(R,p),R.forEach(v),l.forEach(v),this.h()},h(){m(s,"type","email"),m(s,"placeholder","Enter your email"),m(s,"class","svelte-1wey3dl"),m(t,"class","svelte-1wey3dl"),m(n,"type","text"),m(n,"placeholder","Enter your password"),m(n,"class","svelte-1wey3dl"),m(i,"class","svelte-1wey3dl"),m(c,"type","submit"),Y(c,"pointer-events",a[1]?"none":"auto"),m(c,"class","svelte-1wey3dl"),m(d,"class","svelte-1wey3dl"),E(d,"error",a[0].status==="error"),E(d,"success",a[0].status==="success"),m(e,"class","svelte-1wey3dl"),E(e,"dark",!!a[3])},m(o,l){j(o,e,l),h(e,t),h(t,s),I(s,a[2].email),h(e,r),h(e,i),h(i,n),I(n,a[2].password),h(e,_),h(e,c),w[u].m(c,null),h(e,P),h(e,d),h(d,D),g=!0,O||(z=[U(s,"input",a[6]),U(n,"input",a[7]),U(e,"submit",se(a[8]))],O=!0)},p(o,[l]){l&4&&s.value!==o[2].email&&I(s,o[2].email),l&4&&n.value!==o[2].password&&I(n,o[2].password);let k=u;u=F(o),u!==k&&(oe(),S(w[k],1,1,()=>{w[k]=null}),le(),f=w[u],f||(f=w[u]=C[u](o),f.c()),M(f,1),f.m(c,null)),(!g||l&2)&&Y(c,"pointer-events",o[1]?"none":"auto"),(!g||l&1)&&p!==(p=o[0].response+"")&&re(D,p),(!g||l&1)&&E(d,"error",o[0].status==="error"),(!g||l&1)&&E(d,"success",o[0].status==="success"),(!g||l&8)&&E(e,"dark",!!o[3])},i(o){g||(M(f),g=!0)},o(o){S(f),g=!1},d(o){o&&v(e),w[u].d(),O=!1,ae(z)}}}function _e(a,e,t){let s,r,i;V(a,N,p=>t(9,r=p)),V(a,ce,p=>t(5,i=p));const n=ne();let _={email:"",password:""};Q(()=>{W(N,r.goPast=!0,r)});let{response:c}=e,u=!1;function f(){_.email=this.value,t(2,_)}function P(){_.password=this.value,t(2,_)}const d=async()=>{t(0,c={response:"",status:""}),t(1,u=!0),n("login",_)};return a.$$set=p=>{"response"in p&&t(0,c=p.response)},a.$$.update=()=>{a.$$.dirty&32&&t(3,s=!i.LightMode),a.$$.dirty&3&&u&&t(1,u=Object.values(c).every(p=>p.length===0))},[c,u,_,s,n,i,f,P,d]}class he extends X{constructor(e){super(),Z(this,e,_e,de,H,{response:0})}}function ge(a){let e,t,s;return t=new he({props:{response:a[0]}}),t.$on("login",a[1]),{c(){e=y("div"),$(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var i=L(e);x(t.$$.fragment,i),i.forEach(v),this.h()},h(){m(e,"class","container svelte-1aq9cwm")},m(r,i){j(r,e,i),ee(t,e,null),s=!0},p(r,[i]){const n={};i&1&&(n.response=r[0]),t.$set(n)},i(r){s||(M(t.$$.fragment,r),s=!0)},o(r){S(t.$$.fragment,r),s=!1},d(r){r&&v(e),te(t)}}}function ve(a,e,t){let s;V(a,N,n=>t(2,s=n));let r={response:""};return Q(()=>{W(N,s.goPast=!0,s)}),[r,async n=>{if(!n.detail.email||!n.detail.password){t(0,r.status="error",r),t(0,r.response="You can't submit an empty form",r);return}t(0,r=await ue(n.detail)),ie(`/authorize/${r.id}`)}]}class Pe extends X{constructor(e){super(),Z(this,e,ve,ge,H,{})}}export{Pe as component};
