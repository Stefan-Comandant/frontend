import{s as Ve,e as _,t as Q,a as M,c as h,b as V,d as X,f as c,g as P,l as K,m as p,z as re,y as W,i as w,h as u,o as $,n as ee,r as Te,k as fe,p as Se,j as J,A as oe,q as Me,B as ce,C as ne,D as Pe}from"../chunks/scheduler.DCHIdItQ.js";import{e as te,u as ue,d as de}from"../chunks/each.Btz5aSee.js";import{S as Re,i as Be}from"../chunks/index.BPubO7i7.js";import{p as Oe}from"../chunks/stores.DUnNtWjl.js";import{l as ge,s as Ue}from"../chunks/stores.CDP2pJ8Z.js";import{f as ie,g as x}from"../chunks/users.Dl7qTyP5.js";import{A as ze}from"../chunks/chat-rooms.ChhdyGtT.js";import{g as Le}from"../chunks/entry.D7BuMwTx.js";function Ce(r,e,l){const t=r.slice();return t[22]=e[l],t}function je(r,e,l){const t=r.slice();return t[28]=e[l],t}function Ee(r,e,l){const t=r.slice();return t[25]=e[l],t}function Ge(r){let e=[],l=new Map,t,o=te(r[1]);const n=s=>s[28].id;for(let s=0;s<o.length;s+=1){let i=je(r,o,s),a=n(i);l.set(a,e[s]=De(a,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=ne()},l(s){for(let i=0;i<e.length;i+=1)e[i].l(s);t=ne()},m(s,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,i);w(s,t,i)},p(s,i){i&526&&(o=te(s[1]),e=ue(e,i,n,1,s,o,l,t.parentNode,de,De,t,je))},d(s){s&&c(t);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function qe(r){let e=[],l=new Map,t,o=te(r[0]);const n=s=>s[25].id;for(let s=0;s<o.length;s+=1){let i=Ee(r,o,s),a=n(i);l.set(a,e[s]=we(a,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=ne()},l(s){for(let i=0;i<e.length;i+=1)e[i].l(s);t=ne()},m(s,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,i);w(s,t,i)},p(s,i){i&657&&(o=te(s[0]),e=ue(e,i,n,1,s,o,l,t.parentNode,de,we,t,Ee))},d(s){s&&c(t);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function De(r,e){let l,t,o,n=x(e[3],e[28].members,e[2]).username+"",s,i,a,I=(x(e[3],e[28].members,e[2]).about?x(e[3],e[28].members,e[2]).about:"Masturbez!")+"",T,k,m,D,y;return{key:r,first:null,c(){l=_("div"),t=_("a"),o=_("div"),s=Q(n),i=M(),a=_("span"),T=Q(I),m=M(),D=_("br"),y=M(),this.h()},l(C){l=h(C,"DIV",{class:!0});var b=V(l);t=h(b,"A",{class:!0,href:!0,style:!0});var N=V(t);o=h(N,"DIV",{class:!0});var B=V(o);s=X(B,n),B.forEach(c),i=P(N),a=h(N,"SPAN",{class:!0});var R=V(a);T=X(R,I),R.forEach(c),N.forEach(c),b.forEach(c),m=P(C),D=h(C,"BR",{}),y=P(C),this.h()},h(){p(o,"class","svelte-fs8jkx"),p(a,"class","svelte-fs8jkx"),p(t,"class","room svelte-fs8jkx"),p(t,"href",k="/chats/direct/"+e[28].id),p(t,"style","flex-direction: column; align-items: flex-start; gap"),W(t,"dark",!!e[9]),p(l,"class","room-container svelte-fs8jkx"),W(l,"dark",!!e[9]),this.first=l},m(C,b){w(C,l,b),u(l,t),u(t,o),u(o,s),u(t,i),u(t,a),u(a,T),w(C,m,b),w(C,D,b),w(C,y,b)},p(C,b){e=C,b&14&&n!==(n=x(e[3],e[28].members,e[2]).username+"")&&J(s,n),b&14&&I!==(I=(x(e[3],e[28].members,e[2]).about?x(e[3],e[28].members,e[2]).about:"Masturbez!")+"")&&J(T,I),b&2&&k!==(k="/chats/direct/"+e[28].id)&&p(t,"href",k),b&512&&W(t,"dark",!!e[9]),b&512&&W(l,"dark",!!e[9])},d(C){C&&(c(l),c(m),c(D),c(y))}}}function we(r,e){let l,t,o,n,s,i,a,I,T=e[25].title+"",k,m,D,y=(e[25].description?e[25].description:"No description")+"",C,b,N,B,R,G;function L(...j){return e[13](e[25],...j)}return{key:r,first:null,c(){l=_("div"),t=_("a"),o=_("div"),n=_("img"),i=M(),a=_("div"),I=_("div"),k=Q(T),m=M(),D=_("span"),C=Q(y),N=M(),B=_("br"),this.h()},l(j){l=h(j,"DIV",{class:!0});var v=V(l);t=h(v,"A",{class:!0,href:!0});var A=V(t);o=h(A,"DIV",{class:!0});var d=V(o);n=h(d,"IMG",{src:!0,alt:!0,class:!0}),d.forEach(c),i=P(A),a=h(A,"DIV",{class:!0});var U=V(a);I=h(U,"DIV",{});var S=V(I);k=X(S,T),S.forEach(c),m=P(U),D=h(U,"SPAN",{class:!0});var E=V(D);C=X(E,y),E.forEach(c),U.forEach(c),A.forEach(c),v.forEach(c),N=P(j),B=h(j,"BR",{}),this.h()},h(){oe(n.src,s=e[25].profilepicture)||p(n,"src",s),p(n,"alt","pfp"),p(n,"class","room-picture svelte-fs8jkx"),p(o,"class","pfp-input-container svelte-fs8jkx"),p(D,"class","svelte-fs8jkx"),p(a,"class","svelte-fs8jkx"),p(t,"class","room svelte-fs8jkx"),p(t,"href",b="/chats/group/"+e[25].id),W(t,"dark",!!e[9]),p(l,"class","room-container svelte-fs8jkx"),W(l,"dark",!!e[9]),this.first=l},m(j,v){w(j,l,v),u(l,t),u(t,o),u(o,n),u(t,i),u(t,a),u(a,I),u(I,k),u(a,m),u(a,D),u(D,C),w(j,N,v),w(j,B,v),R||(G=$(t,"contextmenu",Pe(L)),R=!0)},p(j,v){e=j,v&1&&!oe(n.src,s=e[25].profilepicture)&&p(n,"src",s),v&1&&T!==(T=e[25].title+"")&&J(k,T),v&1&&y!==(y=(e[25].description?e[25].description:"No description")+"")&&J(C,y),v&1&&b!==(b="/chats/group/"+e[25].id)&&p(t,"href",b),v&512&&W(t,"dark",!!e[9]),v&512&&W(l,"dark",!!e[9])},d(j){j&&(c(l),c(N),c(B)),R=!1,G()}}}function ye(r){let e,l="Edit Room",t,o;return{c(){e=_("button"),e.textContent=l},l(n){e=h(n,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-10h2v7l"&&(e.textContent=l)},m(n,s){w(n,e,s),t||(o=$(e,"click",r[14]),t=!0)},p:ee,d(n){n&&c(e),t=!1,o()}}}function Ie(r){let e,l="Delete Room";return{c(){e=_("button"),e.textContent=l},l(t){e=h(t,"BUTTON",{"data-svelte-h":!0}),K(e)!=="svelte-1wjnz5o"&&(e.textContent=l)},m(t,o){w(t,e,o)},d(t){t&&c(e)}}}function Ne(r){var U;let e,l,t,o,n="Created At",s,i,a=ie(String(r[7].createdat)).ofDay+"",I,T,k=ie(String(r[7].createdat)).ofYear+"",m,D,y,C="Owner",b,N,B=((U=r[7].ownerData)==null?void 0:U.username)+"",R;function G(S,E){return Ye}let j=G()(r);function v(S,E){if(S[7].description)return Xe;if(S[7].description)return Qe}let A=v(r),d=A&&A(r);return{c(){e=_("dialog"),j.c(),l=M(),d&&d.c(),t=M(),o=_("span"),o.textContent=n,s=M(),i=_("div"),I=Q(a),T=Q(" on "),m=Q(k),D=M(),y=_("span"),y.textContent=C,b=M(),N=_("div"),R=Q(B),this.h()},l(S){e=h(S,"DIALOG",{class:!0});var E=V(e);j.l(E),l=P(E),d&&d.l(E),t=P(E),o=h(E,"SPAN",{"data-svelte-h":!0}),K(o)!=="svelte-1yoneiz"&&(o.textContent=n),s=P(E),i=h(E,"DIV",{});var O=V(i);I=X(O,a),T=X(O," on "),m=X(O,k),O.forEach(c),D=P(E),y=h(E,"SPAN",{"data-svelte-h":!0}),K(y)!=="svelte-wj6azn"&&(y.textContent=C),b=P(E),N=h(E,"DIV",{});var z=V(N);R=X(z,B),z.forEach(c),E.forEach(c),this.h()},h(){p(e,"class","svelte-fs8jkx")},m(S,E){w(S,e,E),j.m(e,null),u(e,l),d&&d.m(e,null),u(e,t),u(e,o),u(e,s),u(e,i),u(i,I),u(i,T),u(i,m),u(e,D),u(e,y),u(e,b),u(e,N),u(N,R),r[16](e)},p(S,E){var O;j.p(S,E),A===(A=v(S))&&d?d.p(S,E):(d&&d.d(1),d=A&&A(S),d&&(d.c(),d.m(e,t))),E&128&&a!==(a=ie(String(S[7].createdat)).ofDay+"")&&J(I,a),E&128&&k!==(k=ie(String(S[7].createdat)).ofYear+"")&&J(m,k),E&128&&B!==(B=((O=S[7].ownerData)==null?void 0:O.username)+"")&&J(R,B)},d(S){S&&c(e),j.d(),d&&d.d(),r[16](null)}}}function Ye(r){let e,l="Title",t,o,n=r[7].title+"",s;return{c(){e=_("span"),e.textContent=l,t=M(),o=_("div"),s=Q(n)},l(i){e=h(i,"SPAN",{"data-svelte-h":!0}),K(e)!=="svelte-7ccxmo"&&(e.textContent=l),t=P(i),o=h(i,"DIV",{});var a=V(o);s=X(a,n),a.forEach(c)},m(i,a){w(i,e,a),w(i,t,a),w(i,o,a),u(o,s)},p(i,a){a&128&&n!==(n=i[7].title+"")&&J(s,n)},d(i){i&&(c(e),c(t),c(o))}}}function Qe(r){let e,l="Description",t,o;return{c(){e=_("label"),e.textContent=l,t=M(),o=_("input"),this.h()},l(n){e=h(n,"LABEL",{for:!0,"data-svelte-h":!0}),K(e)!=="svelte-5yycfp"&&(e.textContent=l),t=P(n),o=h(n,"INPUT",{type:!0,id:!0}),this.h()},h(){p(e,"for","title-input"),p(o,"type","text"),p(o,"id","title-input")},m(n,s){w(n,e,s),w(n,t,s),w(n,o,s)},p:ee,d(n){n&&(c(e),c(t),c(o))}}}function Xe(r){let e,l="Description",t,o,n=r[7].description+"",s;return{c(){e=_("span"),e.textContent=l,t=M(),o=_("div"),s=Q(n)},l(i){e=h(i,"SPAN",{"data-svelte-h":!0}),K(e)!=="svelte-rmspr8"&&(e.textContent=l),t=P(i),o=h(i,"DIV",{});var a=V(o);s=X(a,n),a.forEach(c)},m(i,a){w(i,e,a),w(i,t,a),w(i,o,a),u(o,s)},p(i,a){a&128&&n!==(n=i[7].description+"")&&J(s,n)},d(i){i&&(c(e),c(t),c(o))}}}function Fe(r){let e,l="New Chat",t,o;return{c(){e=_("button"),e.textContent=l,this.h()},l(n){e=h(n,"BUTTON",{type:!0,"data-svelte-h":!0}),K(e)!=="svelte-1cwh3d6"&&(e.textContent=l),this.h()},h(){p(e,"type","button")},m(n,s){w(n,e,s),t||(o=$(e,"click",r[17]),t=!0)},p:ee,d(n){n&&c(e),t=!1,o()}}}function He(r){let e,l="Create New Room";return{c(){e=_("a"),e.textContent=l,this.h()},l(t){e=h(t,"A",{href:!0,"data-svelte-h":!0}),K(e)!=="svelte-157jt7w"&&(e.textContent=l),this.h()},h(){p(e,"href","/chats/new")},m(t,o){w(t,e,o)},p:ee,d(t){t&&c(e)}}}function Ae(r,e){let l,t,o,n,s,i,a,I=e[22].username+"",T,k,m,D=e[22].about+"",y,C,b,N,B="New Chat",R,G,L;function j(){return e[18](e[22])}return{key:r,first:null,c(){l=_("div"),t=_("div"),o=_("img"),s=M(),i=_("div"),a=_("div"),T=Q(I),k=M(),m=_("span"),y=Q(D),C=M(),b=_("div"),N=_("button"),N.textContent=B,R=M(),this.h()},l(v){l=h(v,"DIV",{class:!0});var A=V(l);t=h(A,"DIV",{class:!0});var d=V(t);o=h(d,"IMG",{class:!0,alt:!0,src:!0}),s=P(d),i=h(d,"DIV",{class:!0});var U=V(i);a=h(U,"DIV",{class:!0});var S=V(a);T=X(S,I),S.forEach(c),k=P(U),m=h(U,"SPAN",{class:!0});var E=V(m);y=X(E,D),E.forEach(c),U.forEach(c),d.forEach(c),C=P(A),b=h(A,"DIV",{});var O=V(b);N=h(O,"BUTTON",{type:!0,"data-svelte-h":!0}),K(N)!=="svelte-1qjj2jf"&&(N.textContent=B),O.forEach(c),R=P(A),A.forEach(c),this.h()},h(){p(o,"class","profile-picture svelte-fs8jkx"),p(o,"alt","Pfp"),oe(o.src,n=e[22].profilepicture)||p(o,"src",n),p(a,"class","svelte-fs8jkx"),p(m,"class","svelte-fs8jkx"),p(i,"class","svelte-fs8jkx"),p(t,"class","details svelte-fs8jkx"),p(N,"type","button"),p(l,"class","account svelte-fs8jkx"),this.first=l},m(v,A){w(v,l,A),u(l,t),u(t,o),u(t,s),u(t,i),u(i,a),u(a,T),u(i,k),u(i,m),u(m,y),u(l,C),u(l,b),u(b,N),u(l,R),G||(L=$(N,"click",j),G=!0)},p(v,A){e=v,A&8&&!oe(o.src,n=e[22].profilepicture)&&p(o,"src",n),A&8&&I!==(I=e[22].username+"")&&J(T,I),A&8&&D!==(D=e[22].about+"")&&J(y,D)},d(v){v&&c(l),G=!1,L()}}}function Je(r){var pe;let e,l,t,o,n,s,i,a,I,T,k,m,D=r[2].id&&((pe=r[7].admins)==null?void 0:pe.includes(r[2].id)),y,C,b,N="Quit Room",B,R,G,L,j,v=[],A=new Map,d,U;function S(f,g){return f[8]=="rooms"?qe:Ge}let E=S(r),O=E(r),z=D&&ye(r),Y=r[2].id&&r[7].owner===r[2].id&&Ie(),q=r[7]&&Ne(r);function _e(f,g){return f[8]=="rooms"?He:Fe}let le=_e(r),H=le(r),se=te([...r[3]]);const he=f=>f[22].id;for(let f=0;f<se.length;f+=1){let g=Ce(r,se,f),F=he(g);A.set(F,v[f]=Ae(F,g))}return{c(){e=_("div"),l=_("button"),t=Q("Rooms"),n=M(),s=_("button"),i=Q("Chats"),I=M(),O.c(),T=M(),k=_("dialog"),m=_("div"),z&&z.c(),y=M(),Y&&Y.c(),C=M(),b=_("button"),b.textContent=N,B=M(),q&&q.c(),R=M(),H.c(),G=M(),L=_("dialog"),j=_("div");for(let f=0;f<v.length;f+=1)v[f].c();this.h()},l(f){e=h(f,"DIV",{});var g=V(e);l=h(g,"BUTTON",{class:!0});var F=V(l);t=X(F,"Rooms"),F.forEach(c),n=P(g),s=h(g,"BUTTON",{class:!0});var ve=V(s);i=X(ve,"Chats"),ve.forEach(c),I=P(g),O.l(g),g.forEach(c),T=P(f),k=h(f,"DIALOG",{class:!0});var me=V(k);m=h(me,"DIV",{class:!0});var Z=V(m);z&&z.l(Z),y=P(Z),Y&&Y.l(Z),C=P(Z),b=h(Z,"BUTTON",{"data-svelte-h":!0}),K(b)!=="svelte-eey5jc"&&(b.textContent=N),Z.forEach(c),me.forEach(c),B=P(f),q&&q.l(f),R=P(f),H.l(f),G=P(f),L=h(f,"DIALOG",{class:!0});var ke=V(L);j=h(ke,"DIV",{style:!0});var be=V(j);for(let ae=0;ae<v.length;ae+=1)v[ae].l(be);be.forEach(c),ke.forEach(c),this.h()},h(){p(l,"class",o="convo-switch "+(r[8]=="rooms"?"active":"")+" svelte-fs8jkx"),p(s,"class",a="convo-switch "+(r[8]=="chats"?"active":"")+" svelte-fs8jkx"),p(m,"class","svelte-fs8jkx"),p(k,"class","popup svelte-fs8jkx"),re(j,"display","flex"),re(j,"flex-direction","column"),re(j,"gap","1.2rem"),p(L,"class","svelte-fs8jkx"),W(L,"dark",!!r[9])},m(f,g){w(f,e,g),u(e,l),u(l,t),u(e,n),u(e,s),u(s,i),u(e,I),O.m(e,null),w(f,T,g),w(f,k,g),u(k,m),z&&z.m(m,null),u(m,y),Y&&Y.m(m,null),u(m,C),u(m,b),r[15](k),w(f,B,g),q&&q.m(f,g),w(f,R,g),H.m(f,g),w(f,G,g),w(f,L,g),u(L,j);for(let F=0;F<v.length;F+=1)v[F]&&v[F].m(j,null);r[19](L),d||(U=[$(l,"click",r[11]),$(s,"click",r[12])],d=!0)},p(f,[g]){var F;g&256&&o!==(o="convo-switch "+(f[8]=="rooms"?"active":"")+" svelte-fs8jkx")&&p(l,"class",o),g&256&&a!==(a="convo-switch "+(f[8]=="chats"?"active":"")+" svelte-fs8jkx")&&p(s,"class",a),E===(E=S(f))&&O?O.p(f,g):(O.d(1),O=E(f),O&&(O.c(),O.m(e,null))),g&132&&(D=f[2].id&&((F=f[7].admins)==null?void 0:F.includes(f[2].id))),D?z?z.p(f,g):(z=ye(f),z.c(),z.m(m,y)):z&&(z.d(1),z=null),f[2].id&&f[7].owner===f[2].id?Y||(Y=Ie(),Y.c(),Y.m(m,C)):Y&&(Y.d(1),Y=null),f[7]?q?q.p(f,g):(q=Ne(f),q.c(),q.m(R.parentNode,R)):q&&(q.d(1),q=null),le===(le=_e(f))&&H?H.p(f,g):(H.d(1),H=le(f),H&&(H.c(),H.m(G.parentNode,G))),g&8&&(se=te([...f[3]]),v=ue(v,g,he,1,f,se,A,j,de,Ae,null,Ce)),g&512&&W(L,"dark",!!f[9])},i:ee,o:ee,d(f){f&&(c(e),c(T),c(k),c(B),c(R),c(G),c(L)),O.d(),z&&z.d(),Y&&Y.d(),r[15](null),q&&q.d(f),H.d(f);for(let g=0;g<v.length;g+=1)v[g].d();r[19](null),d=!1,Te(U)}}}function Ke(r,e,l){let t,o,n,s;fe(r,Ue,d=>l(10,o=d)),fe(r,ge,d=>l(20,n=d)),fe(r,Oe,d=>l(21,s=d));let i=[],a=[],I={},T=[],k,m,D,y={admins:[],owner:""};Se(()=>{l(0,i=s.data.groups),l(1,a=s.data.chats),l(2,I=s.data.USER),l(3,T=s.data.users),Me(ge,n.goPast=!0,n)});let C="rooms";const b=()=>{l(8,C="rooms")},N=()=>{l(8,C="chats")},B=async(d,U)=>{k.show(),l(7,y=d),l(4,k.style.top=U.pageY+"px",k),l(4,k.style.left=U.pageX+"px",k)},R=()=>m.showModal();function G(d){ce[d?"unshift":"push"](()=>{k=d,l(4,k)})}function L(d){ce[d?"unshift":"push"](()=>{m=d,l(5,m)})}const j=()=>{D.open?D.close():D.showModal()},v=async d=>{const U=await ze({title:"Direct Conversation",description:"",members:[d.id?d.id:""],admins:[],messages:[],type:"direct"});U.status==="success"&&Le(`/chats/direct/${U.id}`)};function A(d){ce[d?"unshift":"push"](()=>{D=d,l(6,D)})}return r.$$.update=()=>{r.$$.dirty&1024&&l(9,t=!o.LightMode)},[i,a,I,T,k,m,D,y,C,t,o,b,N,B,R,G,L,j,v,A]}class it extends Re{constructor(e){super(),Be(this,e,Ke,Je,Ve,{})}}export{it as component};
